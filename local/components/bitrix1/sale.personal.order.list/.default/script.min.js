BX.namespace("BX.Sale.PersonalOrderComponent"),BX.Sale.PersonalOrderComponent.PersonalOrderList={init:function(l){var e=document.getElementsByClassName("sale-order-list-inner-row");l.paymentList=l.paymentList||{},l.url=l.url||"",Array.prototype.forEach.call(e,function(t){var e=t.getElementsByClassName("sale-order-list-shipment-id");e[0]&&Array.prototype.forEach.call(e,function(e){var t=e.parentNode.getElementsByClassName("sale-order-list-shipment-id-icon")[0];t&&BX.clipboard.bindCopyClick(t,{text:e.innerHTML})}),BX.bindDelegate(t,"click",{class:"ajax_reload"},BX.proxy(function(e){var s=t.getElementsByClassName("sale-order-list-inner-row-body")[0],a=t.getElementsByClassName("sale-order-list-inner-row-template")[0],n=a.getElementsByClassName("sale-order-list-cancel-payment")[0];BX.ajax({method:"POST",dataType:"html",url:e.target.href,data:{sessid:BX.bitrix_sessid()},onsuccess:BX.proxy(function(e){var t=document.createElement("div");t.innerHTML=e,a.insertBefore(t,n),s.style.display="none",a.style.display="block",BX.bind(n,"click",function(){s.style.display="block",a.style.display="none",t.remove()},this)},this),onfailure:BX.proxy(function(){return this},this)},this),e.preventDefault()},this)),BX.bindDelegate(t,"click",{class:"sale-order-list-change-payment"},BX.proxy(function(s){s.preventDefault();var a=t.getElementsByClassName("sale-order-list-inner-row-body")[0],n=t.getElementsByClassName("sale-order-list-inner-row-template")[0],r=n.getElementsByClassName("sale-order-list-cancel-payment")[0];BX.ajax({method:"POST",dataType:"html",url:l.url,data:{sessid:BX.bitrix_sessid(),orderData:l.paymentList[s.target.id]},onsuccess:BX.proxy(function(e){var t=document.createElement("div");t.innerHTML=e,n.insertBefore(t,r),s.target.style.display="none",a.parentNode.removeChild(a),n.style.display="block",BX.bind(r,"click",function(){window.location.reload()},this)},this),onfailure:BX.proxy(function(){return this},this)},this)},this))})}};