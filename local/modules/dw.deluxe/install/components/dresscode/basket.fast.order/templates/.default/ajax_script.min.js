$(function(){function n(e){return errorFlag=!1,void 0!==e&&(e.removeClass("error"),"yes"==e.data("required"))&&("text"==e.attr("type")?""==e.val()&&(e.addClass("error"),errorFlag=!0):"checkbox"!=e.attr("type")||e.prop("checked")||(e.addClass("error"),errorFlag=!0)),errorFlag}function i(e){var t=$("#bind__fast-basket-submit").removeClass("error");void 0!==e&&("Y"==e.SUCCESS?("undefined"!=typeof globalSettings&&void 0!==globalSettings.TEMPLATE_METRICA_FAST_CART&&void 0!==globalSettings.TEMPLATE_METRICA_ID&&void 0!==window["yaCounter"+globalSettings.TEMPLATE_METRICA_ID]&&window["yaCounter"+globalSettings.TEMPLATE_METRICA_ID].reachGoal(globalSettings.TEMPLATE_METRICA_FAST_CART),$(".fast-basket-container").addClass("hidden"),$(".fast-basket-success").addClass("open")):($(".fast-basket-container").addClass("hidden"),$(".fast-basket-error").addClass("open"),t.addClass("error"),console.error(e))),t.removeClass(".loading")}function e(e){var t=$(this);return $(document).off("change","#bind__fast-basket-form input"),$(document).off("click","#bind__fast-basket-submit"),$(document).off("submit","#bind__fast-basket-form"),$(".fast-basket").remove(),$(".fastBasketStyles").remove(),"yes"==t.data("reload")&&window.location.reload(),e.preventDefault()}$(document).on("change","#bind__fast-basket-form input",function(e){var t=$(this).removeClass("error");n(t)}),$(document).on("click","#bind__fast-basket-submit",function(e){return $("#bind__fast-basket-form").trigger("submit"),e.preventDefault()}),$(document).on("submit","#bind__fast-basket-form",function(e){var a,t=$(this),s=t.find("input"),r=t.find("#bind__fast-basket-submit"),o=!1;return 0<s.length&&(s.each(function(e,t){t=$(t);(fieldError=n(t))&&(o=!0)}),o||("undefined"!=typeof fastBasketAjaxDir&&""!=fastBasketAjaxDir?"undefined"!=typeof SITE_ID&&""!=SITE_ID?(s=t.serializeArray(),a={},$.each(s,function(e,t){a[t.name]=t.value}),t={act:"sendFastForm",site_id:SITE_ID},$.extend(t,a),$.ajax({url:fastBasketAjaxDir+"/ajax.php",type:"POST",data:t,dataType:"json",success:i}),r.addClass("loading")):console.error("check vars - SITE_ID"):console.error("check vars - ajaxDir"))),e.preventDefault()}),$(document).on("click",".fast-basket-container__exit",e),$(document).on("click",".basket-success-close__button",e),$(document).on("click",".basket-error-close__button",e)});