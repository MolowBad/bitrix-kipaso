$(function(){function e(e){var r,a=(t=$(this).parents(".catalogSubscribe")).find(".catalogSubscribeRotatorBg"),s=t.find(".catalogSubscribeEmail"),o=t.find('input[name="catalogSubscribePersonalInfo"]'),t=t.find(".catalogSubscribeForm"),s=s.val(),c=o.prop("checked"),n=t.attr("action"),t=t.data("subscribe-id"),i=!1;return a.removeClass("error"),a.removeClass("success"),o.removeClass("error"),"string"==typeof(r=s)&&""!=r&&/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(String(r).toLowerCase())&&""!=n&&""!=t||(a.addClass("error"),i=!0),0==c&&(o.addClass("error"),i=!0),!1===i&&((r=new FormData).append("actionType","subscribe"),r.append("subscribeId",t),r.append("email",s),"undefined"!=typeof subscribeSiteId&&r.append("siteId",subscribeSiteId),c="post",o="json",i=function(e){{var r,s;!0===e.status&&!0===e.success?($(".catalogSubscribeSuccess").addClass("open"),a.addClass("success")):!0===e.error&&(r=$(".catalogSubscribeError"),s=r.find(".catalogSubscribeErrorText"),"object"!=typeof e.errors||$.isEmptyObject(e.errors)||$.each(e.errors,function(){s.html(this.toString())}),r.addClass("open"),a.addClass("error"),console.error(e))}},$.ajax({dataType:o,processData:!1,contentType:!1,cache:!1,url:n,type:c,data:r,success:i,error:function(e,r,s){console.error({httpResponse:e.responseText,status:e.statusText}),console.error(e,r,s)}})),e.preventDefault()}function r(e){return $(".catalogSubscribeSuccess, .catalogSubscribeError").removeClass("open"),e.preventDefault()}$(document).on("click",".catalogSubscribeSuccessCloseButton",r),$(document).on("click",".catalogSubscribeErrorCloseButton",r),$(document).on("click",".catalogSubscribeSend",e),$(document).on("submit",".catalogSubscribeForm",e)});