$(function(){function l(e){var l=$(this),a=l.val(),o=Number(l.data("step")),a=a.replace(/[^\d]/gi,"")==a&&Number(a)>o?Number(a):o;return a=Math.ceil(a/o)*o,l.val(a=9999<a?9999:a),clearTimeout(s),s=setTimeout(t,v),e.preventDefault()}function a(e){$(this);var l=Number(u.val()),a=Number(u.data("step"));return a<l&&(u.val((10*l-10*a)/10).removeClass("error"),clearTimeout(s),s=setTimeout(t,v)),e.preventDefault()}function o(e){$(this);var l=(10*Number(u.val())+10*Number(u.data("step")))/10;return u.val(l=9999<l?9999:l).removeClass("error"),clearTimeout(s),s=setTimeout(t,v),e.preventDefault()}function r(e){clearTimeout(s),s=setTimeout(t,v)}function t(){var e;"undefined"!=typeof fastCalcDeliveryAjaxDir?"undefined"!=typeof fastCalcDeliveryParams?(d.addClass("loading"),$calcAllProducts=m.prop("checked")?"Y":"N",e={act:"getCalculatedItems",quantity:u.val(),calcAllItems:$calcAllProducts},$.extend(e,fastCalcDeliveryParams),$.ajax({url:fastCalcDeliveryAjaxDir+"/ajax.php",type:"POST",data:e,dataType:"json",success:f,error:y})):console.error("fastCalcDeliveryParams not found"):console.error("fastCalcDeliveryAjaxDir not found")}function c(e){return $(document).off("change",".delivery-modal #delivery-modal-calc-checkbox",r),$(document).off("keyup",".delivery-modal .qtyBlock .qty",l),$(document).off("click",".delivery-modal .qtyBlock .minus",a),$(document).off("click",".delivery-modal .qtyBlock .plus",o),$(document).off("click",".delivery-modal .delivery-modal-exit",c),d.remove(),i.remove(),e.preventDefault()}var d=$(".delivery-modal"),i=$(".fastDeliveryModalStyles"),n=($(".fastDeliveryModalScript"),d.find(".delivery-items")),u=d.find(".qty"),m=d.find("#delivery-modal-calc-checkbox"),s=null,v=500,y=function(e,l){d.removeClass("loading").addClass("error"),console.error(e),console.error(l)},f=function(e){void 0!==e.HTML_DATA&&n.html(e.HTML_DATA),d.removeClass("loading")};$(document).on("change",".delivery-modal #delivery-modal-calc-checkbox",r),$(document).on("keyup",".delivery-modal .qtyBlock .qty",l),$(document).on("click",".delivery-modal .qtyBlock .minus",a),$(document).on("click",".delivery-modal .qtyBlock .plus",o),$(document).on("click",".delivery-modal .delivery-modal-exit",c)});