$(function(){function n(){if("object"!=typeof o||o.length<=0)return!1;var e,t,i,n;function r(e){e.removeClass("fixed").removeClass("ended").removeAttr("style")}c=v(),l<=c&&(1800<c||c<1520)&&(i=$(window).scrollTop(),n=o.offset().top,e=s.innerHeight(),t=a.innerHeight(),n<i)&&t<e?i<=n+e-t?(a.removeClass("ended").addClass("fixed"),i=a,n=o.width(),i.css("width",n)):a.removeClass("fixed").addClass("ended"):r(a)}function d(){o=$(".detail-delivery-paysystems"),a=o.find(".detail-delivery-paysystems-container"),s=$(".delivery-items-container"),$(window)}function e(){c=v(),l<=c&&(1800<c||c<1520)?$(window).on("scroll.delivery",n):$(window).off("scroll.delivery",n)}var o=$(".detail-delivery-paysystems"),a=o.find(".detail-delivery-paysystems-container"),s=$(".delivery-items-container"),l=($(window),1366),c=0,v=function(){var e=void 0!==window.innerWidth?window.innerWidth:(void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?document.documentElement:document.getElementsByTagName("body")[0]).clientWidth;return e};$.extend({getDeliveryComponent:function(e,t,i,n="N"){$ajaxContainer=$(".fast-deliveries-container");var r=deliveryAjaxDir+"/ajax.php",i={actionType:"getDeliveryComponent",productAvailable:i,productQuantity:t,defferedMode:n,productId:e};void 0!==deliveryParams.GROUP_BUTTONS_LABELS&&(i.serviceButtons=deliveryParams.GROUP_BUTTONS_LABELS),void 0!==deliveryParams.SHOW_DELIVERY_IMAGES&&(i.serviceImages=deliveryParams.SHOW_DELIVERY_IMAGES),$ajaxContainer.addClass("loading"),$.ajax({url:r,type:"POST",data:i,dataType:"html",complete:function(e){"object"==typeof e&&void 0!==e.responseText?""!=e.responseText?$ajaxContainer.html(e.responseText):console.error("error, empty response; get delivery component"):console.error("error, component result is undefined; get delivery component");return $ajaxContainer.removeClass("loading"),d()}})}});$(document).on("click",".deliveries-tab-switcher",function(e){var t=$(this),i=$(".delivery-group-item"),n=$(".deliveries-tab-item"),r=t.data("group-id");return i.removeClass("active"),n.removeClass("selected"),i.filter('[data-group-id="'+r+'"]').addClass("active"),t.parents(".deliveries-tab-item").addClass("selected"),e.preventDefault()}),$(document).on("click",".delivery-item-question",function(e){return $(this).parents(".delivery-item").find(".delivery-item-description").toggle(100),n(),e.preventDefault()}),$(document).on("click",".show-all-deliveries",function(e){var t=$(this),i=t.parents(".delivery-group-item"),i=(s=0<i.length?i.find(".delivery-item.limit"):$(".delivery-item.limit"),t.data("state-text"));return s.toggleClass("disabled"),t.data("state-text",t.text()).text(i),d(),n(),e.preventDefault()}),$(document).on("click",".delivery-item-buy",function(e){var t,i,n,r,d;return"undefined"==typeof deliveryAjaxDir?console.error("delivery ajax dir not defined"):(i=(t=$(this)).data("product-id"),n=t.data("delivery-id"),r=deliveryAjaxDir+"/ajax.php",d="undefined"!=typeof SITE_DIR?SITE_DIR:"/",""==i?console.error("product id not defined"):(t.addClass("loading"),$.ajax({url:r,type:"POST",data:{actionType:"addProduct",productId:i},success:function(e){if($.isEmptyObject(e))console.error("add product error (empty answer)");else{if(void 0!==e.success&&1==e.success)return window.location.href=d+"personal/cart/?deliveryId="+n;console.error(e.errors)}t.removeClass("loading")},dataType:"json"}),e.preventDefault()))}),e(),$(window).on("resize",function(){$(window).innerWidth()!=c&&(d(),e(),n())})});