$(function(){var u="bar",h="sub",n="active";$(window).on("ready resize",{reducedWidth:1250,maxMenuWidth:800},function(e){function n(){t.append($("<li/>").addClass(u).append($("<a/>").attr("href","#").addClass("openEnder")).append($("<ul/>").addClass(h))),i=t.find("."+u),o=i.find("."+h),r++}function a(e){!1===e?(t.addClass("transfered").children("li").each(function(e){var n=$(this);n.hasClass(u)||(o.append(n.clone()),n.remove())}),s++):(o.children("li").each(function(e){var n=$(this);n.hasClass(u)||(t.append(n.clone()),n.remove())}),t.removeClass("transfered"),i.remove(),d=t.children("li:not(.bar)"),s--,r--)}var t=$("#topMenu"),d=t.children("li:not(.bar)"),i=t.find("."+u),o=t.find("."+h),r=0<i.length?1:0,s=t.hasClass("transfered")?1:0;if(document.body.clientWidth<=e.data.reducedWidth)r||n(),s||a(!1);else if(s&&a(!0),t.outerWidth()>e.data.maxMenuWidth)for(var l=d.length-1;0<=l;l--){var c=d.eq(l);if(t.outerWidth()<=e.data.maxMenuWidth)break;r||n(),o.prepend(c.clone()),c.remove()}}),$(document).on("click","#topMenu ."+u,function(e){e.stopImmediatePropagation()}),$(document).on("click","#topMenu .openEnder",function(e){$(this).closest("."+u).toggleClass(n),e.preventDefault()}),$(document).on("click","html",function(e){$("#topMenu ."+u).removeClass(n)})});