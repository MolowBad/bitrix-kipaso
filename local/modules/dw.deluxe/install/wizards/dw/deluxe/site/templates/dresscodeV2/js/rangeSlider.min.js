(m=>{jQuery.fn.rangeSlider=function(s){s=m.extend({step:1},s);return this.each(function(){function e(t){var e="left"!=t?f.main:0,e=Math.abs(100*(o[t].val()-s.min)/(s.max-s.min)*c.scroll-e)+"px";h[t].width(e)}function a(t){return 0<=t?t:0}var t=m(this),i=t.find(".handler"),n=t.find(".slider"),r=!1,l=i.offset(),f={main:n.width()},h={left:t.find(".blackoutLeft"),right:t.find(".blackoutRight")},g={left:m(s.leftButton),right:m(s.rightButton)},o={left:m(s.inputLeft),right:m(s.inputRight)},c={range:(s.max-s.min)/100,scroll:f.main/100};o.left.val()!=s.min&&e("left"),o.right.val()!=s.max&&e("right"),o.left.change(function(t){parseInt(o.left.val())>=parseInt(o.right.val())?o.left.val(parseInt(o.right.val())-1):parseInt(o.left.val())<s.min&&o.left.val(s.min),e("left")}),o.right.change(function(t){parseInt(o.right.val())<=parseInt(o.left.val())?o.right.val(parseInt(o.left.val())+1):parseInt(o.right.val())>s.max&&o.right.val(s.max),e("right")}),i.on("mousedown",function(t){var e,i;0==r?(t="left"==(e=f.main/2>t.pageX-l.left?"left":"right")?t.pageX-l.left:f.main-(t.pageX-l.left),i=Math.round(Math.abs(("left"==e?s.min:-s.max)+a(t)/c.scroll*c.range)),h[e].addClass("trans").css("width",a(t)),setTimeout(function(){h[e].removeClass("trans")},300),o[e].val(i).trigger("change")):r=!1}),g.left.mousedown(function(t){g.left.active=!0,g.left.clickStart=t.pageX,g.left.widthStart=parseInt(h.left.width()),t.stopImmediatePropagation(),t.preventDefault()}),g.right.mousedown(function(t){g.right.active=!0,g.right.clickStart=t.pageX,g.right.widthStart=parseInt(h.right.width()),t.stopImmediatePropagation(),t.preventDefault()}),m(document).on({mousemove:function(t){if(g.right.active){if((e=g.right.widthStart+(g.right.clickStart-t.pageX))>f.main-h.left.width()||e<0)return!1;o.right.val(Math.round(s.max-e/c.scroll*c.range)).trigger("change"),h.right.width(e),r=!0}else if(g.left.active){var e;if((e=g.left.widthStart-(g.left.clickStart-t.pageX))>f.main-h.right.width()||e<0)return!1;o.left.val(Math.round(s.min+e/c.scroll*c.range)).trigger("change"),h.left.width(e),r=!0}},mouseup:function(t){g.left.active=g.right.active=r=!1}}),m(window).resize(function(){f.main=n.width(),c.scroll=f.main/100})})}})($);