(h=>{jQuery.fn.dwCarousel=function(n){(n=h.extend({resizeAutoParams:!1,slideItem:"li, .slideItem",slideBox:".slideBox",resizeElement:!1,resizeWidth:!1,countElement:6,severity:8,speed:400},n)).tmpCountElement=n.countElement;var e=h(this),s=new function(t){this.ths=t,this.ul=e.find(n.slideBox),this.li=this.ul.children(n.slideItem),this.a=this.ul.find("a"),this.qtyLI=this.li.length,this.curPos=null,this.startTouch=!1,this.startTouchPos=!1,this.clicking=!1,this.active=!1,this.lastWidth=0}(h(this));function i(t){s.ul.css({width:100*s.qtyLI+"%"}),s.li.css({width:100/s.qtyLI/t+"%"})}function o(i){n.tmpCountElement;var o=15360;n.countElement=n.tmpCountElement,!0===n.resizeElement&&(!1!==n.resizeWidth?n.countElement=Math.floor(e.outerWidth()/n.resizeWidth):!1!==n.resizeAutoParams&&h.each(n.resizeAutoParams,function(t,e){parseFloat(i)<=parseFloat(t)&&parseFloat(o)>parseFloat(t)&&(n.countElement=e,o=t)})),n.countElement<s.qtyLI?(h(n.leftButton).show(),h(n.rightButton).show(),s.active||(s.active=!0,t(!0))):(h(n.leftButton).hide(),h(n.rightButton).hide(),s.ul.unbind(),s.active=!1),s.ul.css("left",0)}var t=function(t){t&&(void 0!==n.leftButton&&""!=n.leftButton&&h(document).on("click",n.leftButton,{direction:"left"},u),void 0!==n.rightButton&&""!=n.rightButton&&h(document).on("click",n.rightButton,{direction:"right"},u),h(document).on("mouseup touchend",a),s.ul.on("mousedown touchstart",l),s.ul.on("mousemove touchmove",c),s.active=!0)},u=function(t){var e="left"==t.data.direction?"left":"right",i=s.qtyLI-n.countElement,o=null;"left"==e?s.curPos?o="-"+100/n.countElement*--s.curPos+"%":(o="-"+100/n.countElement*i+"%",s.curPos=Math.floor(i)):++s.curPos>=i?s.curPos=o=0:o=i-s.curPos<1?"-"+100/n.countElement*i+"%":"-"+100/n.countElement*s.curPos+"%",s.ul.finish().animate({left:o},n.speed),t.preventDefault()},l=function(t){s.startTouch=("touchstart"==t.type?t.originalEvent.touches[0]:t).pageX,s.startTouchPos=Math.abs(parseInt(s.ul.css("left"),10)),"touchstart"!==t.type&&t.preventDefault()},c=function(t){var e;!1!==s.startTouch&&(t.pageX=("touchmove"==t.type?t.originalEvent.touches[0]:t).pageX,t=-s.startTouchPos-(s.startTouch-t.pageX),e=s.li.outerWidth()*s.qtyLI-n.countElement*s.li.outerWidth(),0<t?t/=8:e<Math.abs(parseInt(s.ul.css("left")))&&(t=-(e+(Math.abs(t)-e)/8)),s.ul.stop().css({left:t+"px"}),s.clicking=!0)},a=function(t){var e,i,o;!1!==s.startTouch&&(e=s.li.outerWidth()*s.qtyLI-n.countElement*s.li.outerWidth(),o=null,0<(i=parseInt(s.ul.css("left")))?o=0:Math.abs(s.startTouchPos-Math.abs(i))<30?(o="-"+s.startTouchPos,s.clicking=!1):o=e<Math.abs(i)?"-"+e:"-"+(e<(i=(Math.abs(i)>s.startTouchPos?Math.ceil(Math.abs(i)/s.li.outerWidth()):Math.floor(Math.abs(i)/s.li.outerWidth()))*s.li.outerWidth())?e:i),s.ul.finish().animate({left:o},n.speed),s.startTouch=!1,s.clicking)&&(s.a.each(function(){var t=h(this);if(t.is(":hover"))return t.one("click",function(t){t.preventDefault()}),!1}),s.clicking=!1)};h(window).resize(function(t){o(h(window).innerWidth()),i(n.countElement)}),o(h(window).innerWidth()),i(n.countElement),t(),e.css({overflow:"hidden",position:"relative"}),s.ul.css({position:"relative",overflow:"hidden",clear:"both",left:"0px"}),s.lastWidth=h(window).width()}})($);