$(function(){$(document).on("focus",".webFormItemField input, .webFormItemField select, .webFormItemField textarea",function(e){$(this).removeClass("error")}),$(document).on("click",".webFormModalHeadingExit",function(e){return $(this).parents(".webformModal").removeClass("visible"),e.preventDefault()}),$(document).on("click",".openWebFormModal",function(e){var a=$("#webFormDwModal_"+$(this).data("id"));return a.find(".webformModalContainer").height()<$(window).height()&&a.addClass("small"),a.addClass("visible"),e.preventDefault()}),$(document).on("click",".webFormMessageExit",function(e){return $(".webFormMessage").hide(),e.preventDefault()}),$(document).on("submit",".webFormDwModal form",function(e,a){var t=new FormData(this),o=!1,r=!1,i=$(this).addClass("loading"),n=i.parents(".webFormDwModal"),s=i.find(".webFormItemField"),d=i.find(".webFormItemError"),l=i.find('input[type="submit"]').addClass("loading"),m=i.find(".webFormError"),c=i.find(".webFormCaptchaSid"),p=i.find(".webFormCaptchaImage"),u=n.data("id"),n=(s.each(function(e,a){var a=$(a);"Y"!=a.data("required")||!(a=a.find('input[type="text"], input[type="password"], input[type="file"], select, textarea')).attr("name")||a.val()&&0!=a.val().length||(a.addClass("error"),r)||(o=a.offset().top,r=!0)}),i.find("#personalInfoField"));return n.prop("checked")||(n.addClass("error"),r=!0),0==r?$.ajax({url:webFormAjaxDir+"?FORM_ID="+u+"&SITE_ID="+webFormSiteId,data:t,cache:!1,contentType:!1,processData:!1,enctype:"multipart/form-data",type:"POST",dataType:"json",success:function(e){d.empty().removeClass("visible"),m.empty().removeClass("visible"),"Y"!=e.SUCCESS?($.each(e.ERROR,function(e,a){var t=$("#WEB_FORM_ITEM_"+e);(0!=e&&t?t.find(".webFormItemError").html(a):m.append(a)).addClass("visible")}),e.CAPTCHA&&(c.val(e.CAPTCHA.CODE),p.attr("src",e.CAPTCHA.PICTURE))):($("#webFormMessage_"+u).css({display:"block"}),$(".webformModal").removeClass("visible"),i[0].reset()),i.removeClass("loading"),l.removeClass("loading")}}):(o&&$("html, body").animate({scrollTop:o-$(window).height()/2},250),i.removeClass("loading"),l.removeClass("loading")),e.preventDefault()})});